<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Trang web b√°n h√†ng v·ªõi c√°c s·∫£n ph·∫©m Dimsum h·∫•p, Dimsum chay h·∫•p, Dimsum ƒë√¥ng l·∫°nh v√† Panna cotta.">
    <meta name="keywords" content="Dimsum, Dimsum h·∫•p, Dimsum chay, Dimsum ƒë√¥ng l·∫°nh, Panna cotta, M√≥n ƒÉn, ƒê·ªì ƒÉn">
    <meta name="author" content="T√™n c·ªßa b·∫°n ho·∫∑c t√™n c√¥ng ty">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Trang web b√°n h√†ng Dimsum v√† Panna cotta">
    <meta property="og:description" content="Trang web b√°n h√†ng v·ªõi c√°c s·∫£n ph·∫©m Dimsum h·∫•p, Dimsum chay h·∫•p, Dimsum ƒë√¥ng l·∫°nh v√† Panna cotta.">
    <meta property="og:image" content="img\herosection.jpg">
    <meta property="og:url" content="https://hacaobabilun.com">
    <meta name="twitter:card" content="img\herosection.jpg">
    <meta name="twitter:title" content="Trang web b√°n h√†ng Dimsum v√† Panna cotta">
    <meta name="twitter:description" content="Trang web b√°n h√†ng v·ªõi c√°c s·∫£n ph·∫©m Dimsum h·∫•p, Dimsum chay h·∫•p, Dimsum ƒë√¥ng l·∫°nh v√† Panna cotta.">
    <meta name="twitter:image" content="img\herosection.jpg">
    <title>Menu</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <!--<img src="img\logo.jpg" alt="logo"> -->
            <h1><i class="fa-solid fa-star fa-2xs" style="color: #c4392d;"></i> H√° C·∫£o - B√† Bi L√πn <i class="fa-solid fa-star fa-2xs" style="color: #c4392d;"></i></h1>
            <img src="img\herosection.jpg" alt="herosection">
        </header>

        <!-- Search bar -->
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="T√¨m ki·∫øm m√≥n ƒÉn" oninput="showSuggestions()" onkeydown="handleKeyDown(event)">
            <div id="suggestions-container"></div>
            <i class="fas fa-search"></i>
        </div>

        <!-- Categories -->
        <div class="categories" id="categories"></div>

        <!-- Menu -->
        <div class="menu">
            <div id="menu-items"></div>
        </div>

        <!-- Total Bill -->
        
        <button class="confirm-button" onclick="redirectToConfirmPage()">
            <div class="total-bill-confirm">
                <span class="total-text">üõíGi·ªè h√†ng </span>
                <span class="total-price" id="total-price">0 VND</span>
            </div>
        </button>
        <section class="call-buton"><a class="cc-calto-action-ripple" href="https://zalo.me/0938550881"><i class="fa fa-phone"></i><span class="num">0938.550.881</span></a>
        </section>
    </div>

    <script>
        const items = [
            "Cheeseburger",
            "Hamburger",
            "Pizza",
            "Sushi",
            "Pasta",
            "Salad",
            "Sandwich",
            "Steak",
            "Taco",
            "Burrito"
        ];

        function showSuggestions() {
            const input = document.getElementById('search-input').value.toLowerCase();
            const suggestionsContainer = document.getElementById('suggestions-container');
            suggestionsContainer.innerHTML = '';

            if (input) {
                const suggestions = items.filter(item => item.toLowerCase().includes(input));
                suggestions.forEach(suggestion => {
                    const suggestionElement = document.createElement('div');
                    suggestionElement.classList.add('suggestion');
                    suggestionElement.textContent = suggestion;
                    suggestionElement.onclick = () => selectSuggestion(suggestion);
                    suggestionsContainer.appendChild(suggestionElement);
                });
            }
        }

        function selectSuggestion(suggestion) {
            document.getElementById('search-input').value = suggestion;
            document.getElementById('suggestions-container').innerHTML = '';
            searchItems();
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter') {
                searchItems();
            }
        }

        function searchItems() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                const itemName = item.getAttribute('data-name').toLowerCase();
                if (itemName.includes(query)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function changeQuantity(button, change) {
            const quantitySpan = button.parentElement.querySelector('.quantity');
            let currentQuantity = parseInt(quantitySpan.textContent);
            currentQuantity += change;
            if (currentQuantity < 0) {
                currentQuantity = 0;
            }
            quantitySpan.textContent = currentQuantity;

            // Update total bill
            updateTotalBill();
        }

        function updateTotalBill() {
            const menuItems = document.querySelectorAll('.menu-item');
            let totalPrice = 0;
            menuItems.forEach(item => {
                const price = parseInt(item.getAttribute('data-price'));
                const quantity = parseInt(item.querySelector('.quantity').textContent);
                totalPrice += price * quantity;
            });
            document.getElementById('total-price').textContent = totalPrice.toLocaleString() + ' VND';
        }

        function redirectToConfirmPage() {
            const quantities = Array.from(document.querySelectorAll('.menu-item')).map(item => {
                const name = item.querySelector('h3').textContent;
                const quantity = parseInt(item.querySelector('.quantity').textContent);
                const price = parseInt(item.getAttribute('data-price'));
                const image = item.querySelector('img').src;
                return { name, quantity, price, image };
            });
            localStorage.setItem('orderQuantities', JSON.stringify(quantities));
            window.location.href = 'order-summary.html';
        }

        function toggleDetails(element) {
            const menuItem = element.closest('.menu-item');
            const details = menuItem.querySelector('.product-details');
            const allDetails = document.querySelectorAll('.product-details');

            allDetails.forEach(detail => {
                if (detail !== details) {
                    detail.style.display = 'none';
                }
            });

            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
            } else {
                details.style.display = 'none';
            }
        }

        // H√†m ƒë·ªÉ t·∫£i d·ªØ li·ªáu t·ª´ t·ªáp JSON
        async function loadProducts() {
            const response = await fetch('products.json');
            const data = await response.json();
            return data.categories;
        }

        // H√†m ƒë·ªÉ t·∫°o ph·∫ßn t·ª≠ HTML cho m·ªói s·∫£n ph·∫©m
        function createProductElement(product) {
            const productElement = document.createElement('div');
            productElement.classList.add('menu-item');
            productElement.dataset.name = product.name;
            productElement.dataset.price = product.price.discounted;

            productElement.innerHTML = `
                <img src="${product.image}" alt="${product.name}" onclick="toggleDetails(this)">
                <div class="details">
                    <h3 onclick="toggleDetails(this)">${product.name}</h3>
                    <p>${product.description || ''}</p>
                    <div class="rating">
                        <span class="stars">‚≠ê ${product.rating || ''}</span>
                    </div>
                    <p><span class="price">${product.price.discounted.toLocaleString()} VND</span></p>
                    <div class="quantity-controls">
                        <button onclick="changeQuantity(this, -1)">-</button>
                        <span class="quantity">0</span>
                        <button onclick="changeQuantity(this, 1)">+</button>
                    </div>
                    <div class="product-details" style="display: none;">
                        <p>Additional details about the ${product.name}...</p>
                    </div>
                </div>
            `;

            return productElement;
        }

        // H√†m ƒë·ªÉ t·∫°o ph·∫ßn t·ª≠ HTML cho m·ªói danh m·ª•c
        function createCategoryElement(category) {
            const categoryElement = document.createElement('div');
            categoryElement.classList.add('category');
            categoryElement.innerHTML = `<h2>${category.name}</h2>`;
            category.items.forEach(item => {
                const productElement = createProductElement(item);
                categoryElement.appendChild(productElement);
            });
            return categoryElement;
        }

        // H√†m ƒë·ªÉ hi·ªÉn th·ªã c√°c danh m·ª•c v√† s·∫£n ph·∫©m
        async function displayProducts() {
            const categories = await loadProducts();
            const categoriesContainer = document.getElementById('categories');
            categories.forEach(category => {
                const categoryElement = createCategoryElement(category);
                categoriesContainer.appendChild(categoryElement);
            });
        }

        // G·ªçi h√†m ƒë·ªÉ hi·ªÉn th·ªã s·∫£n ph·∫©m khi trang ƒë∆∞·ª£c t·∫£i
        window.onload = displayProducts;
    </script>
</body>
</html>